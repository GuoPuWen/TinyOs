# TinyOs
《操作系统真象还原》书籍代码，写一个简单的操作系统，阅读每一章的读书笔记。

# 1. 实模式下的MBR加载器

整个章节的思维导图：

![实模式下的MBR加载器](/Users/admin/Desktop/TinyOs/assets/实模式下的MBR加载器.png)

目标：在实模式下，写一个加载程序，将放在磁盘的程序代码加载进进内存中，并且执行。

#### 1.1 MBR

- MBR：**主引导记录**（Master Boot Record，缩写：MBR），又叫做**主引导扇区**，是计算机开机后访问硬盘时所必须要读取的首个扇区

> 1. 通电
> 2. 读取ROM里面的BIOS，用来检查硬件
> 3. 硬件检查通过
> 4. **BIOS根据指定的顺序，检查引导设备的第一个扇区（即主引导记录），加载在内存地址 0x7C00**
> 5. 主引导记录把操作权交给操作系统

#### 1.2 硬盘访问控制

![image-20221007133252703](/Users/admin/Desktop/TinyOs/assets/image-20221007133252703.png)

#### 1.3 其他

详见代码注释

#### 1.4 启动

1. 创建硬盘(这里好像没法使用命令直接生成，所以这里使用交互，没有写入执行脚本里面)

```shell
/usr/local/bin/bximage -hd=10M -imgmode="flat"  -q hd3M.img
```

2. 启动脚本 run.sh
